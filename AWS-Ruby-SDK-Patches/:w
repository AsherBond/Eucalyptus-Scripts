This is a simple patch for the AWS Ruby SDK that makes it compatible with Eucalyptus 3.3.  


INSTALLING AND PATCHING THE AWS RUBY SDK
----------------------------------------
First, install the AWS Ruby SDK, all dependencies, and the Unix patch command.  The following commands work on Centos 6.4, for example:

yum install -y ruby ruby-devel rubygems libxml2 rubygem-nokogiri libxml2-devel libxslt-devel patch
gem install aws-sdk -v 1.8.5

Next, as root, go into the directory where the ruby gem lives. On Centos 6.4, for example:

cd /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.8.5-patchtest

Then apply the patchfile.  In this example, we presume you've copied it into /tmp:

patch -p1 < /tmp/euca-aws-ruby-sdk.1.8.5.patch


USING THE PATCHED SDK WITH EUCA AND AWS
---------------------------------------
The patch basically changes the URLs with which the SDK communicates, adding the service path and port to the URLs.  The resultant patched SDK can be used with both AWS and Eucalyptus, with the following additional changes:

AWS.config({
	:access_key_id => '<Access Key>',
	:secret_access_key => '<Secret Key>',
	:ec2_endpoint => '<CLC IP address>',
	:ec2_port => 8773,
	:ec2_service_path => '/services/Eucalyptus',
	:use_ssl => false,
})


